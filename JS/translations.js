// ── Traductions ───────────────────────────────────────────
const translations = {
  fr: {
    "page.title":       "Édouard Desmyter – Portfolio",
    "page.description": "Portfolio d'Édouard Desmyter, développeur AR / MR / VR. Présentation de projets et réalisations en réalité augmentée, mixte et virtuelle.",

    "merci.page.title":       "Message Envoyé – Édouard Desmyter",
    "merci.page.description": "Message envoyé avec succès - Portfolio d'Édouard Desmyter",

    "nav.name":    "Édouard Desmyter",
    "nav.about":    "À propos",
    "nav.skills":   "Maîtrises",
    "nav.projects": "Projets",
    "nav.contact":  "Contact",

    "hero.firstname": "Édouard",
    "hero.role": "Développeur AR / MR / VR",

    "about.title":    "À propos",
    "about.subtitle": "Développeur XR passionné d'expériences immersives",
    "about.p1": `Ingénieur Efrei Paris spécialisé Image & Réalité Virtuelle, je développe des expériences immersives XR pour transformer la façon dont nous interagissons avec le monde numérique.<br>Passionné par les technologies qui repoussent les limites de l'immersion, j'allie créativité technique et optimisation performance pour créer des applications fluides et engageantes sur tous supports : casques VR (HTC Vive, Pico), casque MR (HoloLens 2), mobile (Android/iOS) et web.`,
    "about.p2":       `Chez Inersio, je pilote les volets AR/VR de projets innovants pour l'industrie française, tout en explorant en parallèle des projets personnels et de recherche universitaire. Mon approche : simplicité technique au service d'expériences mémorables.`,
    "about.p3":       "Curieux, rigoureux et toujours à l'affût des dernières avancées XR.",

    "about.exp.title":  "Expérience",

    "about.exp4.role":  "Développeur AR/VR – Inersio",
    "about.exp4.date":  "2024 – Aujourd'hui",
    "about.exp4.desc":  `Au sein d'<strong class="text-[#C1A261]">Inersio</strong>, j'assure la responsabilité complète du développement des volets <strong>AR et VR</strong> sur nos projets innovants.<br><br>• En réalité augmentée, je conçois des <strong>expériences interactives</strong> basées sur <strong>l'image tracking</strong> et <strong>le world tracking</strong>, permettant de <strong>donner vie à des supports physiques</strong> grâce à du contenu immersif dynamique.<br><br>• En réalité virtuelle, je développe un <strong>viewer VR</strong> dédié aux <strong>visites d'usines</strong> et conçois des expériences visant à <strong>gamifier des vidéos 360°</strong>, afin de <strong>renforcer l'engagement utilisateur</strong>.`,

    "about.exp3.role":  "Ingénieur d'études – Université Côte d'Azur",
    "about.exp3.date":  "2021 – 2023",
    "about.exp3.desc":  `Lors de mon expérience de R&D à l'<strong class="text-[#C1A261]">Université Côte d'Azur</strong>, j'ai participé à un projet innovant dans <strong>le domaine médical</strong>, centré sur la <strong>réalité mixte</strong> pour la <strong>curiethérapie</strong>.<br><br>Mon rôle : <strong>concevoir et développer une application HoloLens 2</strong>, intégrant le <strong>positionnement précis de modèles 3D</strong> et le <strong>tracking d'objets médicaux</strong>.<br><br>Ce projet m'a permis d'approfondir mon expertise en <strong>réalité mixte</strong> et de développer une <strong>rigueur méthodologique</strong> adaptée aux exigences médicales.`,

    "about.exp2.role":  "Stage de fin d'étude – IFSTTAR",
    "about.exp2.date":  "2020",
    "about.exp2.desc":  `Au cours de mon stage à l'<strong class="text-[#C1A261]">IFSTTAR</strong>, j'ai participé au développement d'un <strong>self-avatar</strong> pour une expérience de traversée de route en VR.<br><br>Ce <strong>projet de R&D</strong> m'a offert une première expérience concrète en VR appliquée à la <strong>recherche scientifique</strong>.<br><br>J'y ai approfondi mes compétences en <strong>interaction homme–machine</strong>, <strong>optimisation temps réel</strong>, <strong>modélisation 3D</strong> et <strong>animation</strong>.`,

    "about.exp1.role":  "Études – Efrei Paris",
    "about.exp1.date":  "2017 – 2020",
    "about.exp1.desc":  `À l'<strong class="text-[#C1A261]">Efrei Paris</strong>, j'ai acquis un large éventail de compétences en <strong>développement logiciel et ingénierie informatique</strong>.<br><br>Spécialisation en <strong>Image et Réalité Virtuelle</strong>, axée sur la conception d'<strong>applications interactives AR/VR</strong>.<br><br>Approfondissement de la <strong>création d'environnements immersifs</strong>, de l'<strong>optimisation temps réel</strong> et de la <strong>modélisation 3D</strong>.`,

    "skills.title": "Maîtrises",

    "skills.unity.label": "Développement",
    "skills.unity.desc": `Expertise en conception et développement d'expériences immersives en <strong class="text-[#5f9ea0] font-semibold">réalité virtuelle et augmentée</strong> avec Unity.<br><br>Solide maîtrise des frameworks <strong class="text-[#5f9ea0] font-semibold">AR Foundation</strong>, <strong class="text-[#5f9ea0] font-semibold">XR Interaction Toolkit</strong>, <strong class="text-[#5f9ea0] font-semibold">MRTK</strong>, <strong class="text-[#5f9ea0] font-semibold">VRTK</strong> et <strong class="text-[#5f9ea0] font-semibold">SteamVR</strong>.<br><br>Compétences étendues en <strong class="text-[#5f9ea0] font-semibold">scripting C#</strong>, <strong class="text-[#5f9ea0] font-semibold">animations</strong>, <strong class="text-[#5f9ea0] font-semibold">shaders</strong> (Shader Graph), <strong class="text-[#5f9ea0] font-semibold">optimisation temps réel</strong> et <strong class="text-[#5f9ea0] font-semibold">profiling des performances</strong>.<br><br>Expérience confirmée du <strong class="text-[#5f9ea0] font-semibold">déploiement multiplateforme</strong> (PC, Android, iOS, HoloLens).`,

    "skills.software.label": "Développement",
    "skills.software.title": "Logiciel",
    "skills.software.desc":  `Maîtrise du <strong class="text-[#2ECC71] font-semibold">développement logiciel en C++</strong>, spécialisée en <strong class="text-[#2ECC71] font-semibold">traitement d'image</strong> et <strong class="text-[#2ECC71] font-semibold">optimisation des performances</strong>.<br><br>Expérience en <strong class="text-[#2ECC71] font-semibold">développement web</strong> avec <strong class="text-[#2ECC71] font-semibold">HTML</strong>, <strong class="text-[#2ECC71] font-semibold">CSS</strong>, <strong class="text-[#2ECC71] font-semibold">PHP</strong> et <strong class="text-[#2ECC71] font-semibold">JavaScript</strong>.<br><br>Travail sur des applications iOS en <strong class="text-[#2ECC71] font-semibold">Swift</strong>, notamment pour des projets de <strong class="text-[#2ECC71] font-semibold">réalité augmentée</strong>.<br><br>Compétences solides en <strong class="text-[#2ECC71] font-semibold">conception UI/UX</strong>, alliant ergonomie, cohérence visuelle et expérience utilisateur fluide.`,

    "skills.blender.label": "Modélisation",
    "skills.blender.desc":  `Bonne maîtrise de <strong class="text-[#EB7700] font-semibold">Blender</strong> pour la <strong class="text-[#EB7700] font-semibold">modélisation 3D</strong> low-poly et détaillée, appliquée à des projets Unity VR/AR.<br><br>Compétences couvrant l'ensemble du <strong class="text-[#EB7700] font-semibold">workflow 3D</strong> : <strong class="text-[#EB7700] font-semibold">sculpting</strong>, <strong class="text-[#EB7700] font-semibold">retopologie</strong>, <strong class="text-[#EB7700] font-semibold">UV mapping</strong>, <strong class="text-[#EB7700] font-semibold">texturing PBR</strong>, <strong class="text-[#EB7700] font-semibold">baking</strong> et <strong class="text-[#EB7700] font-semibold">rigging</strong>.<br><br>Habitué à l'export <strong class="text-[#EB7700] font-semibold">FBX/glTF</strong>, aux <strong class="text-[#EB7700] font-semibold">matériaux URP/HDRP</strong> et au <strong class="text-[#EB7700] font-semibold">pipeline Blender‑Unity</strong> optimisé.`,
      
    "projects.title": "Projets",

    "projects.filter.all":  "Tous",
    "projects.filter.misc": "Divers",

    "pedsival.subtitle": "Reconstitution Self Avatar.",
    "pedsival.about":    "Développement d'une simulation VR immersive de traversée routière avec self-avatar réaliste et tracking corporel avancé (HTC Vive + trackers ceinture/pieds). Implémentation d'une cinématique inverse pour une reproduction fidèle des mouvements en temps réel. Conception d'un environnement routier dynamique optimisé à 90 FPS constants, intégrant du trafic réaliste et des scénarios reproductibles pour les tests comportementaux d'IFSTTAR.",

    "biger.subtitle": "Développement application médicale.",
    "biger.about":    "Développement d'une application de curiethérapie en réalité mixte sur HoloLens 2 pour l'assistance chirurgicale en curiethérapie. Intégration du scan 3D anatomique de la patiente dans l'espace opératoire réel et tracking temps réel des outils chirurgicaux pour guider précisément le positionnement des cathéters avec une précision millimétrique.",

    "vrviewer.subtitle": "Visites virtuelles des savoir-faire français.",
    "vrviewer.about":    "Conception d'un viewer VR permettant la visite immersive d'usines à travers des vidéos 360° interactives. L'application offre un accès simplifié et sécurisé aux contenus propriétaires directement depuis le casque Pico G3, garantissant une expérience fluide, réactive et parfaitement adaptée à la présentation de sites industriels à distance.",
    
    "inersioar.subtitle": "Support de communication.",
    "inersioar.about":    "Création d'applications mobile en réalité augmentée offrant des expériences immersives instantanées sur Android (Web) et iOS (App Clip). Les clients peuvent animer leurs supports physiques – cartes de visite, magazines ou affiches – avec des vidéos, ou faire apparaître des avatars parlants en world tracking pour des visites guidées et expositions. Un backoffice dédié permet de gérer et déployer facilement ces expériences à distance.",

    "arportfolio.title":    "Portfolio d'expériences",
    "arportfolio.subtitle": "Support de communication.",
    "arportfolio.about":    "Développement d'un portfolio AR mobile destiné aux équipes commerciales pour présenter les solutions immersives de l'entreprise lors de salons et rendez-vous clients. L'application regroupe plusieurs démonstrations interactives accessibles hors ligne : animation de supports imprimés, placement d'avatars et d'objets 3D dans l'environnement réel, coloration de cheveux via IA et visualisation vidéo de projets complexes. Conçu pour fonctionner sans connexion, le portfolio offre une expérience fluide et captivante sur Android et iOS.",

    "mif.subtitle": "Les Défis du Made in France.",
    "mif.about":    "Développement d'une application VR pour le salon du Made in France à Paris, transformant des visites virtuelles d'usines en expérience de jeu immersive via vidéos 360°. Concept gamifié : challenge interactif où les joueurs doivent trouver des objets cachés dans les environnements 360° des sites industriels français, avec scoring basé sur le temps de découverte. Système de classement : suivi temps réel des performances individuelles, création automatique d'un leaderboard global et récompenses virtuelles, favorisant l'engagement des visiteurs du salon.",

    "perso.title":    "Projet Perso",
    "perso.subtitle": "Jeux 2D.",
    "perso.about":    "Développement d'un jeu 2D complet pour compléter mes compétences Unity et explorer la création de jeux traditionnels, démontrant ma polyvalence au-delà des expériences immersives. Conception d'un jeu avec mécaniques 2D avancées : plateforme, physique réaliste (Unity 2D Physics), animations fluides (Animator 2D), systèmes de scoring et progression joueur. Workflow de développement complet : level design procédural, UI réactive (Canvas 2D), gestion audio dynamique, optimisation mobile et publication sur stores, du prototype à la version finale.",

    "modal.back":       "Retour aux projets",
    "modal.back.short": "Retour",
    "modal.about":      "À propos du projet",
    "modal.tech":       "Technologies utilisées",

    "contact.title":               "Contact",
    "contact.name":                "Nom",
    "contact.name.placeholder":    "Votre nom",
    "contact.email":               "Email",
    "contact.email.placeholder":   "Votre email",
    "contact.message":             "Message",
    "contact.message.placeholder": "Votre message...",
    "contact.send":                "Envoyer",
    "contact.findme":              "Retrouvez-moi aussi ici :",

    "footer.rights":       "© 2026 Édouard Desmyter. Tous droits réservés.",
    "footer.nav.home":     "Home",
    "footer.nav.about":    "À propos",
    "footer.nav.skills":   "Maîtrises",
    "footer.nav.projects": "Projets",
    "footer.nav.contact":  "Contact",

    "merci.title":       "Message Envoyé !",
    "merci.p1":          "Merci pour votre message.<br>Je vous répondrai dans les plus brefs délais.",
    "merci.p2":          "Vous pouvez fermer cette page ou retourner au portfolio.",
    "merci.btn.contact": "Retour au contact",
    "merci.btn.home":    "Retour à l'accueil",
    },

  en: {
    "page.title":       "Edouard Desmyter – Portfolio",
    "page.description": "Portfolio of Edouard Desmyter, AR / MR / VR developer. Showcase of projects and work in augmented, mixed and virtual reality.",

    "merci.page.title":       "Message Sent – Edouard Desmyter",
    "merci.page.description": "Message successfully sent - Edouard Desmyter's Portfolio",

    "nav.name":    "Edouard Desmyter",
    "nav.about":    "About",
    "nav.skills":   "Skills",
    "nav.projects": "Projects",
    "nav.contact":  "Contact",

    "hero.firstname": "Edouard",
    "hero.role": "AR / MR / VR Developer",

    "about.title":    "About",
    "about.subtitle": "XR Developer passionate about immersive experiences",
    "about.p1": `Software Engineer from Efrei Paris, specialized in Image & Virtual Reality, I build immersive XR experiences to transform the way we interact with the digital world.<br>Passionate about technologies that push the boundaries of immersion, I combine technical creativity and performance optimization to create smooth, engaging applications across all platforms: VR headsets (HTC Vive, Pico), MR headset (HoloLens 2), mobile (Android/iOS) and web.`,
    "about.p2":       `At Inersio, I lead the AR/VR components of innovative projects for French industry, while also pursuing personal and university research projects. My approach: technical simplicity in service of memorable experiences.`,
    "about.p3":       "Curious, rigorous, and always on the lookout for the latest XR advances.",

    "about.exp.title":  "Experience",

    "about.exp4.role":  "AR/VR Developer – Inersio",
    "about.exp4.date":  "2024 – Present",
    "about.exp4.desc":  `At <strong class="text-[#C1A261]">Inersio</strong>, I have full ownership of the <strong>AR and VR</strong> development across our innovative projects.<br><br>• In augmented reality, I design <strong>interactive experiences</strong> based on <strong>image tracking</strong> and <strong>world tracking</strong>, bringing <strong>physical media to life</strong> with dynamic immersive content.<br><br>• In virtual reality, I develop a <strong>VR viewer</strong> dedicated to <strong>factory tours</strong> and design immersive experiences to <strong>gamify 360° videos</strong>, boosting <strong>user engagement</strong>.`,

    "about.exp3.role":  "Research Engineer – Université Côte d'Azur",
    "about.exp3.date":  "2021 – 2023",
    "about.exp3.desc":  `During my R&D experience at <strong class="text-[#C1A261]">Université Côte d'Azur</strong>, I contributed to an innovative project in the <strong>medical field</strong>, focused on <strong>mixed reality</strong> for <strong>brachytherapy</strong>.<br><br>My role: <strong>design and develop a HoloLens 2 application</strong> integrating <strong>precise 3D model positioning</strong> and <strong>medical object tracking</strong>.<br><br>This project deepened my expertise in <strong>mixed reality</strong> and built the <strong>methodological rigor</strong> required in healthcare contexts.`,

    "about.exp2.role":  "Internship – IFSTTAR",
    "about.exp2.date":  "2020",
    "about.exp2.desc":  `During my internship at <strong class="text-[#C1A261]">IFSTTAR</strong>, I contributed to the development of a <strong>self-avatar</strong> for a road-crossing VR experience.<br><br>This <strong>R&D project</strong> gave me hands-on experience in VR applied to <strong>scientific research</strong>.<br><br>I developed skills in <strong>human–computer interaction</strong>, <strong>real-time optimization</strong>, <strong>3D modeling</strong> and <strong>animation</strong>.`,

    "about.exp1.role":  "Studies – Efrei Paris",
    "about.exp1.date":  "2017 – 2020",
    "about.exp1.desc":  `At <strong class="text-[#C1A261]">Efrei Paris</strong>, I gained broad skills in <strong>software development and computer engineering</strong>.<br><br>Specialized in <strong>Image and Virtual Reality</strong>, focused on designing <strong>interactive AR/VR applications</strong>.<br><br>Deep dive into <strong>immersive environment creation</strong>, <strong>real-time optimization</strong> and <strong>3D modeling</strong>.`,
        
    "skills.title": "Skills",

    "skills.unity.label": "Development",
    "skills.unity.desc": `Expertise in designing and developing immersive <strong class="text-[#5f9ea0] font-semibold">virtual and augmented reality</strong> experiences with Unity.<br><br>Strong command of <strong class="text-[#5f9ea0] font-semibold">AR Foundation</strong>, <strong class="text-[#5f9ea0] font-semibold">XR Interaction Toolkit</strong>, <strong class="text-[#5f9ea0] font-semibold">MRTK</strong>, <strong class="text-[#5f9ea0] font-semibold">VRTK</strong> and <strong class="text-[#5f9ea0] font-semibold">SteamVR</strong>.<br><br>Extended skills in <strong class="text-[#5f9ea0] font-semibold">C# scripting</strong>, <strong class="text-[#5f9ea0] font-semibold">animations</strong>, <strong class="text-[#5f9ea0] font-semibold">shaders</strong> (Shader Graph), <strong class="text-[#5f9ea0] font-semibold">real-time optimization</strong> and <strong class="text-[#5f9ea0] font-semibold">performance profiling</strong>.<br><br>Proven experience in <strong class="text-[#5f9ea0] font-semibold">multiplatform deployment</strong> (PC, Android, iOS, HoloLens).`,
    
    "skills.software.label": "Development",
    "skills.software.title": "Software",
    "skills.software.desc":  `Proficient in <strong class="text-[#2ECC71] font-semibold">C++ software development</strong>, specialized in <strong class="text-[#2ECC71] font-semibold">image processing</strong> and <strong class="text-[#2ECC71] font-semibold">performance optimization</strong>.<br><br>Experience in <strong class="text-[#2ECC71] font-semibold">web development</strong> with <strong class="text-[#2ECC71] font-semibold">HTML</strong>, <strong class="text-[#2ECC71] font-semibold">CSS</strong>, <strong class="text-[#2ECC71] font-semibold">PHP</strong> and <strong class="text-[#2ECC71] font-semibold">JavaScript</strong>.<br><br>iOS development in <strong class="text-[#2ECC71] font-semibold">Swift</strong>, notably for <strong class="text-[#2ECC71] font-semibold">augmented reality</strong> projects with immersive interfaces.<br><br>Solid skills in <strong class="text-[#2ECC71] font-semibold">UI/UX design</strong>, combining ergonomics, visual consistency and smooth user experience.`,

    "skills.blender.label": "3D Modeling",
    "skills.blender.desc":  `Good command of <strong class="text-[#EB7700] font-semibold">Blender</strong> for <strong class="text-[#EB7700] font-semibold">3D modeling</strong> (low-poly and detailed), applied to Unity VR/AR projects.<br><br>Skills covering the full <strong class="text-[#EB7700] font-semibold">3D workflow</strong>: <strong class="text-[#EB7700] font-semibold">sculpting</strong>, <strong class="text-[#EB7700] font-semibold">retopology</strong>, <strong class="text-[#EB7700] font-semibold">UV mapping</strong>, <strong class="text-[#EB7700] font-semibold">PBR texturing</strong>, <strong class="text-[#EB7700] font-semibold">baking</strong> and <strong class="text-[#EB7700] font-semibold">rigging</strong>.<br><br>Experienced with <strong class="text-[#EB7700] font-semibold">FBX/glTF export</strong>, <strong class="text-[#EB7700] font-semibold">URP/HDRP materials</strong> and an optimized <strong class="text-[#EB7700] font-semibold">Blender‑Unity pipeline</strong>.`,
      
    "projects.title": "Projects",

    "projects.filter.all":  "All",
    "projects.filter.misc": "Other",

    "pedsival.subtitle": "Self Avatar Reconstruction.",
    "pedsival.about":    "Development of an immersive VR road-crossing simulation featuring a realistic self-avatar with advanced body tracking (HTC Vive + waist/feet trackers). Implemented inverse kinematics for accurate real-time movement reproduction. Designed a dynamic road environment optimized at a constant 90 FPS, with realistic traffic and reproducible scenarios for IFSTTAR behavioral research.",

    "biger.subtitle": "Medical application development.",
    "biger.about":    "Development of a mixed reality brachytherapy application on HoloLens 2 for surgical assistance. Integration of the patient's 3D anatomical scan into the real operating space, with real-time tracking of surgical tools to precisely guide catheter positioning with millimeter accuracy.",

    "vrviewer.subtitle": "Virtual tours of French industrial expertise.",
    "vrviewer.about":    "Design of a VR viewer enabling immersive factory tours through interactive 360° videos. The application provides simplified and secure access to proprietary content directly from the Pico G3 headset, delivering a smooth, responsive experience perfectly suited for remote industrial site presentations.",

    "inersioar.subtitle": "Communication support.",
    "inersioar.about":    "Development of mobile augmented reality applications delivering instant immersive experiences on Android (Web) and iOS (App Clip). Clients can bring their physical media to life — business cards, magazines or posters — with videos, or trigger talking avatars via world tracking for guided tours and exhibitions. A dedicated back-office allows easy remote management and deployment of these experiences.",

    "arportfolio.title":    "Experience Portfolio",
    "arportfolio.subtitle": "Communication support.",
    "arportfolio.about":    "Development of a mobile AR portfolio for sales teams to showcase the company's immersive solutions at trade shows and client meetings. The app features multiple interactive demos available offline: animation of printed media, placement of avatars and 3D objects in the real environment, AI-powered hair coloring, and video visualization of complex projects. Designed to run without a connection, the portfolio delivers a smooth and engaging experience on both Android and iOS.",

    "mif.subtitle": "The Made in France Challenges.",
    "mif.about":    "Development of a VR application for the Made in France trade show in Paris, turning virtual factory tours into an immersive gaming experience through 360° videos. Gamified concept: an interactive challenge where players must find hidden objects within 360° environments of French industrial sites, with scoring based on discovery time. Leaderboard system: real-time tracking of individual performances, automatic generation of a global leaderboard and virtual rewards, boosting visitor engagement at the show.",

    "perso.title":    "Personal Project",
    "perso.subtitle": "2D Game.",
    "perso.about":    "Development of a complete 2D game to expand my Unity skills and explore traditional game creation, demonstrating versatility beyond immersive experiences. Designed with advanced 2D mechanics: platforming, realistic physics (Unity 2D Physics), smooth animations (Animator 2D), scoring systems and player progression. Full development workflow: procedural level design, responsive UI (Canvas 2D), dynamic audio management, mobile optimization and store publishing, from prototype to final release.",

    "modal.back":       "Back to projects",
    "modal.back.short": "Back",
    "modal.about":      "About the project",
    "modal.tech":       "Technologies used",

    "contact.title":               "Contact",
    "contact.name":                "Name",
    "contact.name.placeholder":    "Your name",
    "contact.email":               "Email",
    "contact.email.placeholder":   "Your email",
    "contact.message":             "Message",
    "contact.message.placeholder": "Your message...",
    "contact.send":                "Send",
    "contact.findme":              "Find me here:",

    "footer.rights":       "© 2026 Edouard Desmyter. All rights reserved.",
    "footer.nav.home":     "Home",
    "footer.nav.about":    "About",
    "footer.nav.skills":   "Skills",
    "footer.nav.projects": "Projects",
    "footer.nav.contact":  "Contact",

    "merci.title":       "Message Sent!",
    "merci.p1":          "Thank you for your message.<br>I will get back to you as soon as possible.",
    "merci.p2":          "You can close this page or return to the portfolio.",
    "merci.btn.contact": "Back to contact",
    "merci.btn.home":    "Back to home",
    },
};

let currentLang = localStorage.getItem('lang') || 'fr';

function applyTranslations(lang, animate = false) {
  const elements = document.querySelectorAll('[data-i18n]');

    const doSwap = () => {
    const title = document.getElementById('page-title');
    const desc  = document.getElementById('meta-description');
    if (title && translations[lang]?.['page.title'])       title.textContent  = translations[lang]['page.title'];
    if (desc  && translations[lang]?.['page.description']) desc.setAttribute('content', translations[lang]['page.description']);

    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang]?.[key]) el.innerHTML = translations[lang][key];
        if (animate) el.style.opacity = '1';
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (translations[lang]?.[key]) el.placeholder = translations[lang][key];
    });

    document.querySelectorAll('[data-i18n-data-title]').forEach(el => {
        const key = el.getAttribute('data-i18n-data-title');
        if (translations[lang]?.[key]) el.setAttribute('data-title', translations[lang][key]);
    });

    document.querySelectorAll('[data-i18n-data-subtitle]').forEach(el => {
        const key = el.getAttribute('data-i18n-data-subtitle');
        if (translations[lang]?.[key]) el.setAttribute('data-subtitle', translations[lang][key]);
    });

    document.querySelectorAll('[data-i18n-data-about]').forEach(el => {
        const key = el.getAttribute('data-i18n-data-about');
        if (translations[lang]?.[key]) el.setAttribute('data-about', translations[lang][key]);
    });

    // Mise à jour des originaux hors DOM (data-attributes)
    allCards.forEach(card => {
        ['title', 'subtitle', 'about'].forEach(attr => {
        const key = card.getAttribute(`data-i18n-data-${attr}`);
        if (key && translations[lang]?.[key]) card.setAttribute(`data-${attr}`, translations[lang][key]);
        });

        // ← AJOUT : mise à jour des data-i18n internes des cartes hors DOM
        card.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang]?.[key]) el.innerHTML = translations[lang][key];
        });
    });

    // Re-render les cartes visibles
    if (typeof currentFilter !== 'undefined') {
        showFilteredCards(currentFilter);
    }

    document.documentElement.setAttribute('lang', lang);
    };


  if (animate) {
    elements.forEach(el => {
      el.style.transition = 'opacity 0.2s ease';
      el.style.opacity = '0';
    });
    setTimeout(doSwap, 200);
  } else {
    doSwap();
  }

  localStorage.setItem('lang', lang);
  currentLang = lang;
}

function updateToggleButton() {
  const isFr = currentLang === 'fr';
  const ids = ['', '-mobile'];

  ids.forEach(suffix => {
    const pill    = document.getElementById(`lang-pill${suffix}`);
    const labelFr = document.getElementById(`label-fr${suffix}`);
    const labelEn = document.getElementById(`label-en${suffix}`);
    if (!pill) return;

    pill.style.transform = isFr ? 'translateX(0)' : 'translateX(100%)';
    labelFr.className = labelFr.className
      .replace(isFr ? 'text-[#C1A261]/60' : 'text-[#0D1117]', isFr ? 'text-[#0D1117]' : 'text-[#C1A261]/60');
    labelEn.className = labelEn.className
      .replace(isFr ? 'text-[#0D1117]' : 'text-[#C1A261]/60', isFr ? 'text-[#C1A261]/60' : 'text-[#0D1117]');
  });
}

// Toggle : avec fade
function toggleLang() {
  applyTranslations(currentLang === 'fr' ? 'en' : 'fr', true);
  updateToggleButton();
}

// Init : sans fade
document.addEventListener('DOMContentLoaded', () => {
  applyTranslations(currentLang, false);
  updateToggleButton();
});
